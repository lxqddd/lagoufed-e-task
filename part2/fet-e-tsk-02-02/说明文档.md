# webpack 实现vue打包任务说明文档

1. 安装 `webpack webpack-cli` 在webpack5中，`webpack-cli`被剥离出来了，所以这里要单独安装

2. 创建 `webpack.config.js`文件，作为 `webpack`的配置文件

3. 在 `webpack.config.js`中声明一个 `config`对象，并且将其导出

4. 对 `webpack`进行基础配置

   ```js
   const path = require('path')
   const config = {
     entry: path.resolve(__dirname, './src/main.js'), // 打包入口
     output: {
       // 打包完成后输出的输出内容
       path: path.resolve(__dirname, 'dist'),
       filename: 'js/[name].js'
     }
   }
   ```

5. 安装 `html-webpack-plugin`，在 `webpack.config.js`下引入并使用

   ```js
   const HtmlWebpackPlugin = require('html-webpack-plugin')
   
   config = {
     plugins: [
       new HtmlWebpackPlugin({
         template: './public/index.html',	// 模板文件
         filename: 'index.html',	// 打包后输出的文件名
         title: 'webpack搭建vue3开发环境'
       })
     ]
   }
   ```

6. 安装 `babel-loader`，并在 `webpack.config.js`中引入

   ```js
   rules: [
     {
       // js兼容转换
       test: /\.js$/i,
       exclude: '/node_modules',
       loader: 'babel-loader'
     }
   ]
   ```

   

7. 安装 `vue@next, vue-loader@next, @vue/compiler-sfc`，并在 `webpack.config.js`中引用

   ```js
   const { VueLoaderPlugin } = require('vue-loader/dist/index')
   rules: [
     {
       // 处理.vue文件
       test: /\.vue$/i,
       use: 'vue-loader'
     }
   ]
   plugins: [
     new VueLoaderPlugin()	// 添加vue-loader的插件
   ]
   ```

8. 安装 `css-loader less-loaser less mini-css-extract-plugin`，并在 `webpack.config.js`中引用

   ```js
   const MiniCssExtractPlugin = require('mini-css-extract-plugin')
   
   rules: [
     {
       // 处理css预处理语言less
       test: /\.(css|less)$/i,
       use: [MiniCssExtractPlugin.loader, 'css-loader', 'less-loader']
     }
   ]
   
   plugins: [
     new MiniCssExtractPlugin()	//  提取解析css
   ]
   ```

9. 安装 `url-loader`，并在`webpack.config.js`中引用，用于处理图片

   ```js
   rules: [
     {
       test: /\.(png|jpg|jpeg|gif)/,
       use: {
         loader: 'url-loader',
         options: {
           limit: 8192
         }
       }
     }
   ]
   ```

10. 安装 `clean-webpack-plugin`， 并在 `webpack.config.js`中引用，用于清楚dist文件下的内容

    ```js
    const { CleanWebpackPlugin } = require('clean-webpack-plugin')
    
    plugins: [
      new CleanWebpackPlugin()
    ]
    ```

11. 安装 `webpack-dev-server`，为了能够在开发的时候实时的查看效果，以及热更新

    ```js
    devServer: {
      contentBase: path.resolve(__dirname, './dist'),
      port: '3000',
      publicPath: '/',
      hot: true
    },
    ```

12. 在 `package.json`中新增打包和开发的脚本

    ```js
    "scripts": {
      "build": "webpack --config ./webpack.config.js",
    	"serve": "webpack serve --progress --config ./webpack.config.js"
    }
    ```

    